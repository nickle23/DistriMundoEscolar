<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Distribuidora Mundo Escolar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('serve_assets', filename='css/styles.css') }}">
    <!-- Buscador inteligente -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
<!-- Precarga de recursos críticos -->
<link rel="preload" href="{{ url_for('serve_assets', filename='css/styles.css') }}" as="style">
<link rel="preload" href="{{ url_for('serve_assets', filename='js/main.js') }}" as="script">
<link rel="preload" href="{{ url_for('serve_assets', filename='js/promociones.js') }}" as="script">
<link rel="preload" href="img/Logo.webp" as="image">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/fonts/bootstrap-icons.woff2" as="font" type="font/woff2" crossorigin>
  </head>
  <script>
  const btn = document.getElementById('btnSubir');
  window.addEventListener('scroll', () => {
    btn.style.display = window.scrollY > 100 ? 'block' : 'none';
  });
  btn.onclick = () => window.scrollTo({top:0, behavior:'smooth'});
</script>
  <body>
    <!-- Hero / Encabezado -->
    <header class="hero text-center py-5 bg-light">
      <div class="container">
        <h1 class="fw-bold">Distribuidora Mundo Escolar</h1>
        <p class="lead">Todo lo que necesitas, en un solo lugar</p>
        <a href="#productos" class="btn btn-primary btn-lg mt-3">Ver Productos</a>
      </div>
    </header>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
      <div class="container">
        <a class="navbar-brand" href="#">
  <img src="img/Logo.webp" alt="Distribuidora Mundo Escolar">
</a>
        <button id="btnHamburguesa" class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
  <span class="navbar-toggler-icon"></span>
</button>
        <div class="collapse navbar-collapse" id="navMenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="#productos">Productos</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('promociones') }}">Promociones</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('nosotros') }}">Nosotros</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('contacto') }}">Contacto</a></li>
          </ul>
          <!-- Switch modo oscuro -->
<button id="btnTema" class="btn btn-sm btn-outline-secondary ms-2">
  <i class="bi bi-moon"></i>
</button>
        </div>
      </div>
    </nav>

    <!-- Buscador -->
    <div class="text-center my-4">
      <input type="text" id="searchInput" placeholder="Buscar producto..." 
             style="padding: 10px; width: 50%; border-radius: 8px; border: 1px solid #ccc; font-size: 16px;">
    </div>

    <!-- Contenido principal -->
    <main class="container my-5" id="productos">
      <h2 class="mb-4">Productos</h2>
      <!-- Spinner de carga -->
<div id="loader" class="text-center my-5">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
  <p class="mt-2 text-muted">Cargando productos...</p>
</div>
      <div id="magazine" class="row gy-4"></div>
      <nav>
        <ul id="pagination" class="pagination justify-content-center mt-4"></ul>
      </nav>
    </main>

    <!-- Modal Detalle Producto -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Producto</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-5 text-center">
                <img id="modalImage" src="" alt="" class="img-fluid" />
              </div>
              <div class="col-md-7">
                <p id="modalDesc"></p>
                <div id="variants" class="list-group"></div>
                <!-- Botón compartir por WhatsApp -->
<div class="mt-3">
  <a class="btn btn-success w-100" id="btnWhatsApp" target="_blank">
    <i class="bi bi-whatsapp me-2"></i>Pídelo por WhatsApp
  </a>
</div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

<!-- Asegúrate que en el <head> de tu index.html agregues esta línea -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<!-- Footer elegante -->
<footer class="bg-dark text-light pt-5 pb-3 mt-5">
  <div class="container">
    <div class="row">
      <!-- Logo + descripción -->
      <div class="col-md-4 mb-3">
        <h5 class="fw-bold">Distribuidora Mundo Escolar</h5>
        <p style="font-size: 14px;">
          Proveemos útiles escolares y material educativo al por mayor y menor.
          Calidad y confianza para tu negocio. Somos Distribuidores.
        </p>
      </div>

      <!-- Enlaces -->
      <div class="col-md-4 mb-3">
        <h6 class="fw-bold">Enlaces rápidos</h6>
        <ul class="list-unstyled" style="font-size: 14px;">
          <li><a href="#productos" class="text-light text-decoration-none">Productos</a></li>
          <li><a href="{{ url_for('promociones') }}" class="text-light text-decoration-none">Promociones</a></li>
          <li><a href="{{ url_for('nosotros') }}" class="text-light text-decoration-none">Nosotros</a></li>
          <li><a href="{{ url_for('contacto') }}" class="text-light text-decoration-none">Contacto</a></li>
        </ul>
      </div>

      <!-- Contacto -->
      <div class="col-md-4 mb-3">
        <h6 class="fw-bold">Contacto</h6>
        <p style="font-size: 14px; margin:0;">Email: mundoescolardistribuidora@gmail.com</p>
        <p style="font-size: 14px; margin:0;">Telef: +51 922 390 279</p>
        <p style="font-size: 14px; margin:0;">Dirección: Trujillo - Perú</p>
      </div>
    </div>
  </div>

  <!-- Redes sociales -->
  <div class="text-center mb-3">
    <a href="https://www.facebook.com/DistribMundo2506" target="_blank" 
       class="btn btn-outline-light btn-sm rounded-circle me-2">
      <i class="bi bi-facebook"></i>
    </a>
    <a href="https://wa.link/lzrtf4" target="_blank" 
       class="btn btn-outline-light btn-sm rounded-circle">
      <i class="bi bi-whatsapp"></i>
    </a>
  </div>

  <!-- Línea inferior -->
  <div class="text-center mt-3 border-top border-secondary pt-3">
    <small>© 2025 Nixon Design. Todos los derechos reservados.</small>
  </div>
</footer>
    <!-- Botones flotantes SIEMPRE VISIBLES -->
<div class="flotantes">
  <a href="https://www.facebook.com/DistribMundo2506" target="_blank" aria-label="Facebook">
    <i class="bi bi-facebook"></i>
  </a>
  <a href="https://wa.link/lzrtf4" target="_blank" aria-label="WhatsApp">
    <i class="bi bi-whatsapp"></i>
  </a>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('serve_assets', filename='js/main.js') }}"></script>

<script>
  // Esperamos a que el DOM esté listo
  document.addEventListener('DOMContentLoaded', () => {
    const btnSubir = document.getElementById('btnSubir');
    if (!btnSubir) return; // seguridad

    // Mostrar/ocultar según scroll
    window.addEventListener('scroll', () => {
      btnSubir.style.display = window.scrollY > 100 ? 'block' : 'none';
    });

    // Subir suave al tocar
    btnSubir.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
</script>

<!-- Script modo oscuro -->
<script>
  const btnTema = document.getElementById('btnTema');
  const icono = btnTema.querySelector('i');
  if (localStorage.getItem('tema') === 'dark') {
    document.body.classList.add('dark');
    icono.className = 'bi bi-sun';
  }
  btnTema.onclick = () => {
    document.body.classList.toggle('dark');
    const esDark = document.body.classList.contains('dark');
    localStorage.setItem('tema', esDark ? 'dark' : 'light');
    icono.className = esDark ? 'bi bi-sun' : 'bi bi-moon';
  };
</script>

<!-- Script para que la hamburguesa también cierre el menú -->
<script>
  const btnHamburguesa = document.getElementById('btnHamburguesa');
  const navMenu = document.getElementById('navMenu');

  // Alterna cerrar/abrir con el botón
  btnHamburguesa.addEventListener('click', (e) => {
    e.stopPropagation(); // evita conflictos
    const bsCollapse = bootstrap.Collapse.getInstance(navMenu);
    if (bsCollapse) {
      bsCollapse.toggle();
    }
  });

  // Cierra cuando toca fuera del menú
  document.addEventListener('click', (e) => {
    const dentroMenu = navMenu.contains(e.target);
    const esBotón = btnHamburguesa.contains(e.target);
    if (!dentroMenu && !esBotón && navMenu.classList.contains('show')) {
      const bsCollapse = bootstrap.Collapse.getInstance(navMenu);
      bsCollapse.hide();
    }
  });
</script>
<!-- Ventana flotante centrada y con botones sobre la imagen -->
<div id="ventanaFlotante" class="modal fade" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="width: auto; max-width: 90vw;">
    <div class="modal-content" style="width: auto; background: transparent; border: none; box-shadow: none;">
      <!-- Botón X pequeño en la parte superior derecha de la imagen -->
      <div class="position-absolute" style="top: 10px; right: 10px; z-index: 10;">
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar" style="background: rgba(255,255,255,.9); border-radius: 50%; border: 2px solid #FFC700; width: 24px; height: 24px; font-size: 1rem; color: #002C5F; box-shadow: 0 2px 6px rgba(0,0,0,.25);"></button>
      </div>

      <!-- Imagen que se ajusta al tamaño original -->
      <div class="modal-body p-0">
        <img id="imgPromo" src="img/construccion.webp" alt="Promoción o evento" class="img-fluid" style="border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,.35);">
      </div>

      <!-- Botón "Entendido" en la parte inferior central de la imagen -->
      <div class="position-absolute" style="bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 10;">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" style="background: #FFC700; color: #002C5F; border: none; border-radius: 30px; padding: 10px 24px; font-weight: 700; box-shadow: 0 4px 10px rgba(0,0,0,.30);">
          Entendido
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Lazy loading universal -->
<script>
  document.querySelectorAll('img:not([loading])').forEach(img => {
    img.setAttribute('loading', 'lazy');
    if (!img.hasAttribute('width'))  img.setAttribute('width',  img.naturalWidth  || 600);
    if (!img.hasAttribute('height')) img.setAttribute('height', img.naturalHeight || 400);
  });
</script>
</body>
</html>